FROM tomcat:11-jdk25
COPY src/main/resources/docker/tomcat/server.xml /usr/local/tomcat/conf/server.xml
COPY target/all-time-wrestling-rpg-*.war /usr/local/tomcat/webapps/atw-rpg.war
ENV AI_TIMEOUT=300
ENV AI_PROVIDER_AUTO=true
ENV AI_OPENAI_ENABLED=false
ENV AI_OPENAI_API_URL=https://api.openai.com/v1/chat/completions
ENV AI_OPENAI_API_KEY=
ENV AI_OPENAI_DEFAULT_MODEL=gpt-3.5-turbo
ENV AI_OPENAI_PREMIUM_MODEL=gpt-4
ENV AI_OPENAI_MAX_TOKENS=1000
ENV AI_OPENAI_TEMPERATURE=0.7
ENV AI_CLAUDE_ENABLED=false
ENV AI_CLAUDE_API_URL=https://api.anthropic.com/v1/messages/
ENV AI_CLAUDE_API_KEY=
ENV AI_CLAUDE_MODEL_NAME=claude-3-haiku-20240307
ENV AI_GEMINI_ENABLED=false
ENV AI_GEMINI_API_URL=https://generativelanguage.googleapis.com/v1beta/models/
ENV AI_GEMINI_API_KEY=
ENV AI_GEMINI_MODEL_NAME=gemini-2.5-flash
ENV AI_LOCALAI_ENABLED=false
ENV AI_LOCALAI_BASE_URL=http://localhost:8088
ENV AI_LOCALAI_MODEL=llama-3.2-1b-instruct:q4_k_m
ENV AI_LOCALAI_MODEL_URL=
ENV NOTION_TOKEN=
ENV SPRING_DATASOURCE_URL=jdbc:h2:file:/data/atwrpg;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
ENV SPRING_DATASOURCE_USERNAME=sa
ENV SPRING_DATASOURCE_PASSWORD=
ENV SPRING_H2_CONSOLE_ENABLED=true
VOLUME /data
EXPOSE 9090
